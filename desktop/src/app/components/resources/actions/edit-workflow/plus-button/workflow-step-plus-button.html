<div *ngIf="topLevelCategoriesArray">
    <div *ngIf="hasMultipleCategoryOptions()"
         class="circular-button green-button"
         [ngbPopover]="categoryPickerMenu"
         #popover="ngbPopover"
         triggers="manual"
         autoClose="outside"
         (click)="popover.toggle();"
         (hidden)="reset()"
         placement="top">
        <span class="mdi mdi-plus"></span>
    </div>

    <div *ngIf="!hasMultipleCategoryOptions()"
        class="circular-button category-button"
        (click)="baseDocuments.length === 1 && selectCategory(topLevelCategoriesArray[0])"
        [ngbPopover]="categoryPickerMenu"
        #popover="ngbPopover"
        triggers="manual"
        autoClose="outside"
        (click)="popover.toggle();"
        (hidden)="reset()"
        placement="top">
        <category-icon [category]="topLevelCategoriesArray[0].name" size="41"></category-icon>
        <div class="plus-sign-circle">
            <span class="mdi mdi-plus mdi-18px"></span>
        </div>
   </div>
</div>

<ng-template #categoryPickerMenu>
    <div>
        <div id="workflow-step-plus-button-menu">
            <div *ngIf="baseDocuments.length > 1 && createMultiple === undefined">
                <div class="popover-custom-title">
                    <span i18n="@@resources.workflowEditorModal.plusButton.multiple.header">
                        Bitte w채hlen Sie die Anzahl der zu erstellenden Arbeitsschritte.
                    </span>
                </div>
                <ul id="multiple-select-buttons" class="list-group">
                    <li class="list-group-item popover-item"
                        (click)="selectCreateMultipleOption(false)">
                        <span class="button-label"
                              i18n="@@resources.workflowEditorModal.plusButton.multiple.false">
                            Ein gemeinsamer Arbeitsschritt f체r alle ausgew채hlten Ressourcen
                        </span>
                    </li>
                    <li class="list-group-item popover-item"
                        (click)="selectCreateMultipleOption(true)">
                        <span class="button-label"
                              i18n="@@resources.workflowEditorModal.plusButton.multiple.true">
                            Ein eigener Arbeitsschritt pro Ressource (insgesamt {{baseDocuments.length}})
                        </span>
                    </li>
                </ul>
            </div>
            <div *ngIf="baseDocuments.length === 1 || createMultiple !== undefined">
                <div class="popover-custom-title">
                    <span i18n="@@resources.plusButton.selectCategory">Bitte w채hlen Sie eine Kategorie aus.</span>
                </div>
                <category-picker [topLevelCategoriesArray]="topLevelCategoriesArray"
                                 (onCategoryPicked)="selectCategory($event)"></category-picker>
            </div>
        </div>
    </div>
</ng-template>
